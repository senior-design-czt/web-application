<!DOCTYPE html>
<html>
<!-- PlayerSpeedgolf-Starter.html
     This file provides a starting point for the SpeedScore player scoring app to be developed in IM1. 
      Assume these data values for the player:
         Player Name: Provided by in the query string and passed to this page using a data field. Obtainable
                      with this code, which I will explain later: var playerName = <?=data.playerId?> 
         Division: "Open"
         Round: 1
         Player tee time: "8:30"
         Holes: 1, 2, and 3
         Stroke pars for the three holes: 4, 5, and 3
         Mappings between relative par values on a given hole and golf words:
         3 under par = "Albatross"
         2 under par = "Eagle"
         1 under par = "Birdie"
         1 over par = "Bogey"
         2 over par = "Double Bogey"
         3 over par = "Triple Bogey"
         Above 3 over par or below 3 under par: Don't use any word!
         URL of player pic (appears in menu): "https://dl.dropboxusercontent.com/s/y8g8x1dh94xsgbz/2015-SGWC-Chris-3.JPG"
        
        Use this code to obtain base URL of your app, which the user should be taken to if "Log Out" is selected 
        (I'll explain it later):
        var baseUrl = <?=ScriptApp.getService().getUrl()?>
        The URL of the leaderboard can by obtained by appending "?page=leaderboard" to the base URL
-->

<head>
    <base target="_top">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" 
          integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
</head>

<style>    
    <?!= include('css/navbarCSS'); ?> 
</style>

<body>
    <!-- Starter code for side menu -->
    <div id="sideMenu" class="sidenav">
        <div class="sidenavtitle"><img src="https://dl.dropboxusercontent.com/s/y8g8x1dh94xsgbz/2015-SGWC-Chris-3.JPG" height="50" width="50"><span id="scorerLabel" style="font-size:14px">&nbsp;Hundhausen</span></div>
        <!-- Menu elements go here, one per line, as shown in model app: 
             Scoring Instructions, Round Stats, Edit Previous Hole Data, Leaderboard (in new tab) and Log Out
             Font Awesome icons used for menu items: compass, signal, edit, list-ol, sign-out-alt, and info-circle
        -->       
    </div>
    
    <!-- Starter code for top nav bar-->
    <div class="navbar">
        <button id="menuBtn" 
                class="btn" 
                style="background-color:transparent; border-color:#13294E;">
                  <span id="menuBtnIcon" 
                        style="color:white;font-size:30px;cursor:pointer;text-align:center" 
                        class="fas fa-bars"></span>
        </button>
        <span style="color:white;font-size:18px;text-align:center">
          <img src="https://dl.dropboxusercontent.com/s/qpjhy9x9gwdxpob/SpeedScoreLogo64Trans.png" 
               alt="SpeedScore Logo" height="38" width="38"/> 
          <span id="topBarTitle">Scoring for</span>
        </span>
    </div>
    
    <!-- Starter code for startRound page-->
    <div id="startRoundPage" class="paddedPage">
      <!-- HTML definition of start round page goes here-->
            <center>
            <h3>Open Division, Round 1
                <br />Tee time: 8:30
                <br />Playing holes 1 through 3
            </h3>
           <!-- TO DO: Fill in the rest of the HTML to match sample app-->
            </center>
    </div> <!--startRoundPage-->

    <div id="enterHoleDataPage" class="paddedPage">
      <!-- HTML definition of hole data entry page goes here-->
      <!-- TO DO: Fill the HTML to match sample app-->
    </div> <!--enterHoldeDataPage-->
      
    <div id="instructionsPage" class="paddedPage clickable-div">
        <H1>Welcome to SpeedScore!</H1>
        <p>Thank you for volunteering to score for this tournament. Your service is greatly appreciated! Below are instructions for using the SpeedScore app to record player data.</p>
        <p><b>In a nutshell:</b> You will be following your player Hundhausen either on foot or in a golf cart. Your job is to use this app to record </p>
            <ul>
                <li>the time at which your player holes out (i.e., the ball falls into the hole) on each green, and
                <li>the player's score (number of strokes) for each hole.
                </ul>
                <p>Using the SpeedScore app, you will do this in four steps. <i>Depending on the size of your smartphone, you will likely have to <b>scroll down, or even side-to-side</b> to access all data recording buttons.</i></p>
                <ol>
                <li><b>Record the time at which the ball falls in Hole.</b> Press the "Ball in Hole" button to record a player's hole-out time the instant their ball falls in the hole.
                    <li><b>Record player's strokes for the hole.</b> Players are instructed to call out their golf score (number of strokes) after they hole out. Remind them to do so if they don't do it voluntarily! Use the "+" and "-" buttons to record the player's score for the hole.
                    <li><b>Save the data.</b> Press "Save &amp; Next Hole" button to save the data to the server and prepare to record your player's data on the next hole.
                    <li><b>Promptly correct errors.</b> If you make an error in recording your player's data, choose "Edit Recorded Data" from the menu. You will be presented with an interface
                        that allows you to edit the previously-recorded data on your player. 
                </ol>
                    <p>Have fun out there! Remember to try to stay ahead of your player to help them in locating their ball and to ensure you accurately record their scoring data.</p>
    </div> <!--instructionsPage-->

    <div id="roundStatsPage" class="paddedpage clickable-div">
       <!-- HTML definition of hole data entry page goes here
            Use HTML in assets/UnderConstruction.html 
        -->
    </div> <!--roundStatspage-->

    <div id="editHoleDataPage" class="paddedPage clickable-div">
       <!-- HTML definition of edit previous hole data entry page goes here
            Use HTML in assets/UnderConstruction.html 
          -->
    </div> <!--editPrevHoleDataPage-->

    <div id="aboutBox">
         <!-- HTML definition of about box, which should be a modal dialog box
            Use HTML in assets/AboutBoxContent.html
            Build dialog box, as described in https://www.w3schools.com/howto/howto_css_modals.asp
          -->
    </div> <!--aboutBox-->
    
    <!-- Hint: You will need to define divs for additional items here! -->

    <script>
      
     /* Insert here JavaScript event handlers for the following:
        --Side menu items: clicking on Scoring Instructions, Round Stats, Edit Prev Hole Data, and About SpeedScore
        --Hint: Log Out and Leaderboard items should actually go to a different page, so no handlers needed for those
        --Start Round Timer button
        --Go to Scoring button
        --Click when in hole button
        --Record Strokes (+ and -) buttons
        --Save & Next Hole button

        You will also need to write any additional functions needed to get the job done!. 
        Additional tips:
        * Your app must support the ability to advance through THREE holes of scoring.
        * Display the "Please Wait..." spinner for 2 seconds when saving hole data
        * Display the "Success!" dialog box for 2 seconds after hole data saved
        * JavaScript setTimeout() can be used to create the appropriate delays.
    */
    
     /* bindListenerToClassName -- Given a (CSS) class name, a function, and a listener type (e.g., "click"),
        this function iterates through all elements with the class, binding the function to the appropriate
        listener type. 
     */
     function bindListenerToClassName(className, func, listenerType) {
       var classes = document.getElementsByClassName(className);
       for (var i = 0; i < classes.length; ++i) {
         classes[i].addEventListener(listenerType,func);
       }
     }
     
     /* sideMenuItemClick: This function does the side menu housekeeping in cases where the item clicked 
        (of class sideMenuItem) is actually a redirect to antoher page.  
        Hint: Use it for the Log Out and Leaderboard items!
      */
     var sideMenuItemClick = function() {
       document.getElementById("sideMenu").style.width = "0";
       document.getElementbyId("menuBtnIcon").classList.remove("fas fa-times");
       document.getElementById("menuBtnIcon").classList.add("fas fa-bars");
       var inputs = document.getElementsByTagName("input");
       for (var i = 0; i < inputs.length; ++i) {
         inputs[i].disabled = false; //re-enable all buttons on the page, since menu is no longer open
       }
       //menuOpen = false;
     }
     
     //START NAVBARSCRIPTS -- These are provided for your benefit, but you may not need all of them for IM2
     var menuOpen = false;
    
    //toggleInputDisabled -- Given the disabled value to set (true or false), this function iterates through
    //all input elements on the page, setting the disabled value accordingly. In effect, it enables or disables
    //all input on the page.
    function toggleInputDisabled(val) {
      var inputs = document.getElementsByTagName("input");
      for (var i = 0; i < inputs.length; ++i) {
         inputs[i].disabled = val; //toggle disabled value of all buttons on the page
       }
     }
     
    //toggleClassDisabled -- Given the disabled value to set (true or false), this function iterates through
    //all elements of a given class on the page, setting the disabled value accordingly. In effect, it enables or disables
    //the items (which will presumably be buttons).
     function toggleClassDisabled(cName, val) {
       var classItems = document.getElementsByClassName(cName);
       for (var i = 0; i < classItems.length; ++i) {
         classItems[i].disabled = val; //toggle disabled value of this class item
       }
     }
    
    //document click: If the user clicks anywhere in the document while the side menu is open, we need to
    //close the menu, toggle the menu state, and re-enable all buttons/input fields on the page.
    //Note the use of a global menuOpen variable.
    document.addEventListener("click",function(e) {
      if (menuOpen) {
        document.getElementById("menuBtnIcon").classList.remove("fa-times"); //Change back to hamburger when menu closed
        document.getElementById("menuBtnIcon").classList.add("fa-bars");
        document.getElementById("sideMenu").style.width = "0"; //retract menu
        toggleInputDisabled(false); //re-enable all buttons on the page.
        toggleClassDisabled("disabled",true); //restore previously disabled items to disabled
        menuOpen = false;
      }
    });
    
    //menuBtn click: When the top-left side menu button is clicked, we need act based on whether menu is open. 
    //If menu is not open, we open the menu and change the icon from bars to times and stop propagation.
    //If menu is open, then we let the document click event handler handle the event.
    //Note the use of a global menuOpen variable.
    document.getElementById("menuBtn").addEventListener("click",function(e) {
        if (!menuOpen) {
          document.getElementById("menuBtnIcon").classList.remove("fa-bars"); //Change hamburger to X when menu open
          document.getElementById("menuBtnIcon").classList.add("fa-times");
          document.getElementById("sideMenu").style.width = "250px"; //open up menu
          menuOpen = true;
          toggleInputDisabled(true); //disable all buttons on the page while menu is open
          e.stopPropagation(); //Don't allow document click to handle event, as it will just want to close the menu!
        }
    });
     //END NAVBARSCRIPTS
      
    //CODE AND TO BE EXECUTED AFTER PAGE IS LOADED GOES HERE
    //GLOBAL VARIABLES NEEDED FOR APP GO HERE
    var menuOpen = false;
    var currPage = "startRoundPage";
    //Hint: Insert others here!

    //Bind the sideMenuItemClick function to all .sideMenu items
     bindListenerToClassName("sideMenuItem",sideMenuItemClick,"click");

    //INITIALLY MAKE ALL PAGES EXCEPT the round start page invisible
     document.getElementById("instructionsPage").style.visibility = "hidden";
     document.getElementById("aboutPage").style.visibility = "hidden";
     document.getElementById("roundStatsPage").style.visibility = "hidden";
     document.getElementById("editHoleDataPage").style.visibility = "hidden";
     document.getElementById("aboutBox").style.visibility = "hidden";
</script>
</body>
</html>

